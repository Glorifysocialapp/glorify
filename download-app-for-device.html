<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Install Glorify App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { display: flex; justify-content: center; align-items: center; height: 100vh; background:#0175C2; color:white; font-family: sans-serif; }
    button { padding: 16px 32px; font-size: 18px; border: none; border-radius: 8px; cursor: pointer; background:#fff; color:#0175C2; }
    .ios-note { display: none; margin-top: 16px; font-size:14px; }
  </style>
</head>
<body>
  <div>
    <button id="installBtn">Install Glorify App</button>
    <div class="ios-note" id="iosNote">
      Open Share â†’ Add to Home Screen (iOS)
    </div>
  </div>

<script>
const APP_URL = "https://glorifysocialapp.github.io/glorify/";
const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
const installBtn = document.getElementById("installBtn");
const iosNote = document.getElementById("iosNote");

if (isIOS) {
  installBtn.style.display = "none";
  iosNote.style.display = "block";
}

let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
});

installBtn.addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
  } else {
    // fallback: redirect to PWA
    window.location.href = APP_URL;
  }
});
</script>
</body>
</html>
